-- Fluent_UI_Code.lua
-- Versi minimal Fluent UI untuk mendukung pembuatan window, tab, dan elemen dasar.
-- Versi ini bisa Anda kembangkan lebih lanjut sesuai kebutuhan.
local Fluent = {}
Fluent.Version = "1.1.0"

------------------------------------------------------------
-- CreateWindow: Membuat GUI utama Fluent
------------------------------------------------------------
function Fluent:CreateWindow(options)
    options = options or {}
    local window = {}
    window.Title = options.Title or "Window"
    window.SubTitle = options.SubTitle or ""
    window.TabWidth = options.TabWidth or 160
    window.Size = options.Size or UDim2.fromOffset(580, 460)
    window.Acrylic = options.Acrylic or false
    window.Theme = options.Theme or "Dark"
    window.MinimizeKey = options.MinimizeKey or Enum.KeyCode.LeftControl
    window.Tabs = {}

    local screenGui = Instance.new("ScreenGui")
    screenGui.Name = "FluentUI"
    screenGui.Parent = game:GetService("CoreGui")

    local mainFrame = Instance.new("Frame")
    mainFrame.Size = window.Size
    mainFrame.Position = UDim2.new(0.5, -window.Size.X.Offset/2, 0.5, -window.Size.Y.Offset/2)
    mainFrame.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
    mainFrame.BorderSizePixel = 0
    mainFrame.Parent = screenGui

    local titleLabel = Instance.new("TextLabel")
    titleLabel.Size = UDim2.new(1, 0, 0, 30)
    titleLabel.BackgroundTransparency = 1
    titleLabel.Text = window.Title .. " - " .. window.SubTitle
    titleLabel.TextColor3 = Color3.new(1,1,1)
    titleLabel.TextScaled = true
    titleLabel.Parent = mainFrame

    local tabBar = Instance.new("Frame")
    tabBar.Size = UDim2.new(0, window.TabWidth, 1, -30)
    tabBar.Position = UDim2.new(0, 0, 0, 30)
    tabBar.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
    tabBar.Parent = mainFrame

    local contentFrame = Instance.new("Frame")
    contentFrame.Size = UDim2.new(1, -window.TabWidth, 1, -30)
    contentFrame.Position = UDim2.new(0, window.TabWidth, 0, 30)
    contentFrame.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
    contentFrame.Parent = mainFrame

    window.ScreenGui = screenGui
    window.MainFrame = mainFrame
    window.TabBar = tabBar
    window.ContentFrame = contentFrame

    function window:AddTab(tabOptions)
        tabOptions = tabOptions or {}
        local tab = {}
        tab.Title = tabOptions.Title or "Tab"
        tab.Icon = tabOptions.Icon or ""
        
        -- Buat tombol di tabBar
        local tabButton = Instance.new("TextButton")
        tabButton.Size = UDim2.new(1, 0, 0, 30)
        tabButton.BackgroundColor3 = Color3.fromRGB(60, 60, 60)
        tabButton.Text = tab.Title
        tabButton.TextColor3 = Color3.new(1,1,1)
        tabButton.Parent = tabBar
        tab.Button = tabButton

        -- Buat frame konten untuk tab
        local tabContent = Instance.new("ScrollingFrame")
        tabContent.Size = UDim2.new(1, 0, 1, 0)
        tabContent.BackgroundTransparency = 1
        tabContent.Visible = false
        tabContent.CanvasSize = UDim2.new(0, 0, 0, 0)
        tabContent.Parent = contentFrame
        tab.Content = tabContent

        tabButton.MouseButton1Click:Connect(function()
            for _, t in ipairs(window.Tabs) do
                if t.Content then t.Content.Visible = false end
            end
            tabContent.Visible = true
            print("Tab selected: " .. tab.Title)
        end)
        table.insert(window.Tabs, tab)
        return tab
    end

    function window:SelectTab(index)
        if window.Tabs[index] then
            window.Tabs[index].Button:Activate()
        end
    end

    function window:Notify(notifOptions)
        notifOptions = notifOptions or {}
        print("Notification: " .. (notifOptions.Title or "No Title") .. " - " .. (notifOptions.Content or ""))
    end

    return window
end

------------------------------------------------------------
-- Fungsi untuk menambahkan elemen ke dalam tab
------------------------------------------------------------
local function addElement(tab, elementType, options)
    options = options or {}
    local parent = tab.Content
    if elementType == "Paragraph" then
        local paragraph = Instance.new("TextLabel")
        paragraph.Size = UDim2.new(1, 0, 0, 50)
        paragraph.BackgroundTransparency = 1
        paragraph.Text = (options.Title or "Paragraph") .. "\n" .. (options.Content or "")
        paragraph.TextColor3 = Color3.new(1, 1, 1)
        paragraph.TextScaled = true
        paragraph.Parent = parent
        return paragraph
    elseif elementType == "Button" then
        local button = Instance.new("TextButton")
        button.Size = UDim2.new(1, 0, 0, 30)
        button.BackgroundColor3 = Color3.fromRGB(70, 70, 70)
        button.Text = options.Title or "Button"
        button.TextColor3 = Color3.new(1, 1, 1)
        button.Parent = parent
        button.MouseButton1Click:Connect(options.Callback or function() print(button.Text .. " clicked!") end)
        return button
    elseif elementType == "Toggle" then
        local toggle = Instance.new("TextButton")
        toggle.Size = UDim2.new(1, 0, 0, 30)
        toggle.BackgroundColor3 = Color3.fromRGB(80, 80, 80)
        local state = options.Default or false
        toggle.Text = (options.Title or "Toggle") .. " [" .. tostring(state) .. "]"
        toggle.TextColor3 = Color3.new(1, 1, 1)
        toggle.Parent = parent
        toggle.MouseButton1Click:Connect(function()
            state = not state
            toggle.Text = (options.Title or "Toggle") .. " [" .. tostring(state) .. "]"
            if options.Callback then options.Callback(state) end
        end)
        return toggle
    elseif elementType == "Slider" then
        local slider = Instance.new("TextButton")
        slider.Size = UDim2.new(1, 0, 0, 30)
        slider.BackgroundColor3 = Color3.fromRGB(90, 90, 90)
        slider.Text = options.Title or "Slider"
        slider.TextColor3 = Color3.new(1, 1, 1)
        slider.Parent = parent
        slider.MouseButton1Click:Connect(options.Callback or function() print(slider.Text .. " slider clicked!") end)
        return slider
    elseif elementType == "Dropdown" then
        local dropdown = Instance.new("TextButton")
        dropdown.Size = UDim2.new(1, 0, 0, 30)
        dropdown.BackgroundColor3 = Color3.fromRGB(100, 100, 100)
        dropdown.Text = options.Title or "Dropdown"
        dropdown.TextColor3 = Color3.new(1, 1, 1)
        dropdown.Parent = parent
        dropdown.MouseButton1Click:Connect(options.Callback or function() print(dropdown.Text .. " dropdown clicked!") end)
        return dropdown
    elseif elementType == "Colorpicker" then
        local cp = Instance.new("TextButton")
        cp.Size = UDim2.new(1, 0, 0, 30)
        cp.BackgroundColor3 = options.Default or Color3.new(1, 1, 1)
        cp.Text = options.Title or "Colorpicker"
        cp.TextColor3 = Color3.new(0, 0, 0)
        cp.Parent = parent
        cp.MouseButton1Click:Connect(options.Callback or function() print(cp.Text .. " colorpicker clicked!") end)
        return cp
    elseif elementType == "Keybind" then
        local keybind = Instance.new("TextButton")
        keybind.Size = UDim2.new(1, 0, 0, 30)
        keybind.BackgroundColor3 = Color3.fromRGB(110, 110, 110)
        keybind.Text = options.Title or "Keybind"
        keybind.TextColor3 = Color3.new(1, 1, 1)
        keybind.Parent = parent
        keybind.MouseButton1Click:Connect(options.Callback or function() print(keybind.Text .. " keybind clicked!") end)
        return keybind
    elseif elementType == "Input" then
        local input = Instance.new("TextBox")
        input.Size = UDim2.new(1, 0, 0, 30)
        input.BackgroundColor3 = Color3.fromRGB(120, 120, 120)
        input.Text = options.Default or ""
        input.PlaceholderText = options.Placeholder or "Enter text"
        input.TextColor3 = Color3.new(1, 1, 1)
        input.Parent = parent
        input.FocusLost:Connect(function()
            if options.Callback then options.Callback(input.Text) end
        end)
        return input
    end
end

------------------------------------------------------------
-- API untuk menambahkan elemen ke dalam tab
------------------------------------------------------------
function Fluent:AddParagraph(tab, options)
    return addElement(tab, "Paragraph", options)
end

function Fluent:AddButton(tab, options)
    return addElement(tab, "Button", options)
end

function Fluent:AddToggle(tab, options)
    return addElement(tab, "Toggle", options)
end

function Fluent:AddSlider(tab, options)
    return addElement(tab, "Slider", options)
end

function Fluent:AddDropdown(tab, options)
    return addElement(tab, "Dropdown", options)
end

function Fluent:AddColorpicker(tab, options)
    return addElement(tab, "Colorpicker", options)
end

function Fluent:AddKeybind(tab, options)
    return addElement(tab, "Keybind", options)
end

function Fluent:AddInput(tab, options)
    return addElement(tab, "Input", options)
end

------------------------------------------------------------
-- Fungsi tambahan (stub) untuk konfigurasi
------------------------------------------------------------
function Fluent:LoadAutoloadConfig()
    print("LoadAutoloadConfig stub")
end

return Fluent
